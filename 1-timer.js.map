{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate;\n\nconst startButton = document.querySelector('[data-start]');\nstartButton.disabled = true;\n\nconst checkDate = selectedDates => {\n\tuserSelectedDate = new Date(selectedDates[0]).getTime();\n\treturn userSelectedDate > Date.now();\n};\nconst blockStart = () => {\n\tstartButton.disabled = true;\n\tstartButton.classList.remove('active');\n};\nconst enableStart = () => {\n\tstartButton.disabled = false;\n\t!startButton.classList.contains('active')\n\t\t\t\t? startButton.classList.add('active')\n\t\t\t\t: startButton;\n};\n\nconst options = {\n\tenableTime: true,\n\ttime_24hr: true,\n\tdefaultDate: new Date(),\n\tminuteIncrement: 1,\n\tcolor: '#F5F5F5',\n\tonClose(selectedDates) {\n\t\tif (!checkDate(selectedDates)) {\n\t\t\tblockStart();\n\t\t\tiziToast.error({\n\t\t\t\tmessage: 'Please choose a date in the future',\n\t\t\t\tposition: 'topRight',\n\t\t\t\tcolor: 'red',\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tenableStart();\n\t\t}\n\t\t\n\t},\n};\n\nflatpickr('#datetime-picker', options);\nconst datePicker =  document.querySelector('#datetime-picker')\nfunction convertMs(ms) {\n\t// Number of milliseconds per unit of time\n\tconst second = 1000;\n\tconst minute = second * 60;\n\tconst hour = minute * 60;\n\tconst day = hour * 24;\n\n\t// Remaining days\n\tconst days = Math.floor(ms / day);\n\t// Remaining hours\n\tconst hours = Math.floor((ms % day) / hour);\n\t// Remaining minutes\n\tconst minutes = Math.floor(((ms % day) % hour) / minute);\n\t// Remaining seconds\n\tconst seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n\treturn { days, hours, minutes, seconds };\n}\n\n// console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n// console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n// console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\nconst daysField = document.querySelector('[data-days]');\nconst hoursField = document.querySelector('[data-hours]');\nconst minutesField = document.querySelector('[data-minutes]');\nconst secondsField = document.querySelector('[data-seconds]');\n\nlet differ;\nfunction addLeadingZero(value) {\n\treturn ('' + value).padStart(2, '0');\n}\nconst setTimer = () => {\n\tconst fields = [daysField, hoursField, minutesField, secondsField];\n\tconst interval = setInterval(() => {\n\t\tdiffer = userSelectedDate - Date.now();\n\t\tconst timer = [...Object.values(convertMs(differ))];\n\n\t\tif (differ > -1) {\n\t\t\tfields.forEach((field, index) => {\n\t\t\t\tfield.innerHTML = addLeadingZero(timer[index]);\n\t\t\t});\n\t\t} else fields.forEach((field, index) => {\n\t\t\tfield.innerHTML = addLeadingZero(0);\n\t\t});\n\n\t\tif (differ < 1000) {\n\t\t\tconsole.log('clear it');\n\t\t\tclearInterval(interval);\n\t\t\tenableStart()\n\t\t\tdatePicker.disabled = false;\n\t\t}\n\t}, 1000);\n\tif (interval) {\n\t\tblockStart();\n\t\tdatePicker.disabled = true;\n\t}\n};\n\nstartButton.addEventListener('click', setTimer);"],"names":["userSelectedDate","startButton","checkDate","selectedDates","blockStart","enableStart","options","iziToast","flatpickr","datePicker","convertMs","ms","days","hours","minutes","seconds","daysField","hoursField","minutesField","secondsField","differ","addLeadingZero","value","setTimer","fields","interval","timer","field","index"],"mappings":"+IAMA,IAAIA,EAEJ,MAAMC,EAAc,SAAS,cAAc,cAAc,EACzDA,EAAY,SAAW,GAEvB,MAAMC,EAAYC,IACjBH,EAAmB,IAAI,KAAKG,EAAc,CAAC,CAAC,EAAE,UACvCH,EAAmB,KAAK,OAE1BI,EAAa,IAAM,CACxBH,EAAY,SAAW,GACvBA,EAAY,UAAU,OAAO,QAAQ,CACtC,EACMI,EAAc,IAAM,CACzBJ,EAAY,SAAW,GACtBA,EAAY,UAAU,SAAS,QAAQ,GACnCA,EAAY,UAAU,IAAI,QAAQ,CAExC,EAEMK,EAAU,CACf,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,MAAO,UACP,QAAQH,EAAe,CACjBD,EAAUC,CAAa,EAS3BE,KARAD,IACAG,EAAS,MAAM,CACd,QAAS,qCACT,SAAU,WACV,MAAO,KACX,CAAI,EAMF,CACF,EAEAC,EAAU,mBAAoBF,CAAO,EACrC,MAAMG,EAAc,SAAS,cAAc,kBAAkB,EAC7D,SAASC,EAAUC,EAAI,CAQtB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAMA,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EACJ,SAASC,EAAeC,EAAO,CAC9B,OAAQ,GAAKA,GAAO,SAAS,EAAG,GAAG,CACpC,CACA,MAAMC,EAAW,IAAM,CACtB,MAAMC,EAAS,CAACR,EAAWC,EAAYC,EAAcC,CAAY,EAC3DM,EAAW,YAAY,IAAM,CAClCL,EAASpB,EAAmB,KAAK,MACjC,MAAM0B,EAAQ,CAAC,GAAG,OAAO,OAAOhB,EAAUU,CAAM,CAAC,CAAC,EAE9CA,EAAS,GACZI,EAAO,QAAQ,CAACG,EAAOC,IAAU,CAChCD,EAAM,UAAYN,EAAeK,EAAME,CAAK,CAAC,CACjD,CAAI,EACKJ,EAAO,QAAQ,CAACG,EAAOC,IAAU,CACvCD,EAAM,UAAYN,EAAe,CAAC,CACrC,CAAG,EAEGD,EAAS,MACZ,QAAQ,IAAI,UAAU,EACtB,cAAcK,CAAQ,EACtBpB,EAAa,EACbI,EAAW,SAAW,GAEvB,EAAE,GAAI,EACHgB,IACHrB,IACAK,EAAW,SAAW,GAExB,EAEAR,EAAY,iBAAiB,QAASsB,CAAQ"}